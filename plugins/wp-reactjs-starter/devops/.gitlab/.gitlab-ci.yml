# Common extendable job definition for each plugin specific job
.wprjss jobs:
    variables:
        JOB_PACKAGE_NAME: wp-reactjs-starter

# Create only changes expression so a job is only called when there is a relevant change
# This must be here because variables are not allowed in `only`
.wprjss only changes:
    only:
        changes:
            - plugins/wp-reactjs-starter/**/*
            - packages/utils/**/*
            - common/**/*
            - "*.{yml,json,lock}"

include:
    - /plugins/wp-reactjs-starter/devops/.gitlab/stage-validate.yml
    - /plugins/wp-reactjs-starter/devops/.gitlab/stage-build.yml
    - /plugins/wp-reactjs-starter/devops/.gitlab/stage-test.yml
    - /plugins/wp-reactjs-starter/devops/.gitlab/stage-build-production.yml
    - /plugins/wp-reactjs-starter/devops/.gitlab/stage-deploy.yml
